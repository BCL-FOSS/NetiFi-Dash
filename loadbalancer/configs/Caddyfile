{
	log {
		output file /var/log/caddy/caddy.log
		format json
	}
}

(logging) {
	log {
		output file /var/log/caddy/{args[0]}.access.log
		format json
	}
}

www.netifidash.io {
    root /home/linuxadmin/NetiFi-Dash/loadbalancer/web
    file_server
    redir /index / permanent

    handle_errors {
            @404 {
                expression {http.error.status_code} == 404
            }
            rewrite @404 /404.html
            file_server
        }

	reverse_proxy /app/ {
    	to http://app.netifidash.io:20000
    	header_up Host {http.reverse_proxy.upstream.host}
	}
}